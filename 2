<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EGCIS Test Software - TOEFL iBT Reading Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; }
        .hidden { display: none; }
        .correct { background-color: #d1fae5; border: 2px solid #10b981; }
        .incorrect { background-color: #fee2e2; border: 2px solid #ef4444; }
        .selected { border: 2px solid #3b82f6; background-color: #eff6ff; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .passage-text p { margin-bottom: 1.5rem; line-height: 1.8; }
        .highlight { background-color: #fef08a; padding: 0 2px; font-weight: 600; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 antialiased">

<div id="app" class="max-w-7xl mx-auto p-4 md:p-6">
    <!-- Header -->
    <header class="mb-6 flex flex-col md:flex-row justify-between items-start md:items-center border-b pb-6 border-slate-200">
        <div>
            <h1 class="text-3xl font-black text-slate-800 tracking-tight">EGCIS Test Software</h1>
            <p class="text-slate-500 font-bold text-xs uppercase tracking-widest mt-1">TOEFL iBT® Mastery Simulator</p>
            <p class="text-[10px] text-slate-400 mt-2 italic font-medium">TOEFL® is a registered trademark of ETS. This product is not endorsed or approved by ETS.</p>
        </div>
        <div id="timer-display" class="mt-4 md:mt-0 px-6 py-3 bg-blue-900 text-white rounded-xl font-mono text-2xl font-bold shadow-lg">
            00:00:00
        </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 h-[calc(100vh-220px)]">
        <!-- Left Column: Reading Passage -->
        <div id="passage-container" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-8 overflow-y-auto scrollbar-hide">
            <div id="passage-content" class="passage-text text-slate-700 text-lg">
                <!-- Content dynamically injected here -->
            </div>
        </div>

        <!-- Right Column: Question Interface -->
        <div id="quiz-container" class="bg-white rounded-2xl shadow-xl border border-slate-200 flex flex-col overflow-hidden">
            <!-- Progress Tracker -->
            <div class="p-5 border-b border-slate-100 bg-slate-50/80">
                <div class="flex justify-between text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3">
                    <span id="progress-text">Question 1 of 30</span>
                    <span id="topic-badge" class="bg-blue-600 text-white px-3 py-1 rounded-full">SECTION START</span>
                </div>
                <div class="w-full bg-slate-200 h-2 rounded-full overflow-hidden">
                    <div id="progress-bar" class="bg-blue-600 h-full transition-all duration-700 ease-out" style="width: 0%"></div>
                </div>
            </div>

            <!-- Question Content -->
            <div id="question-area" class="p-8 flex-grow overflow-y-auto">
                <div id="hint-box" class="mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 text-sm text-blue-900 font-medium leading-relaxed hidden">
                    <!-- Hint text -->
                </div>
                
                <h2 id="question-text" class="text-xl font-bold text-slate-800 mb-8 leading-tight"></h2>

                <div id="options-list" class="space-y-4">
                    <!-- Options injected here -->
                </div>

                <!-- Feedback Area (Only in Review Mode) -->
                <div id="feedback-area" class="mt-10 p-6 rounded-xl bg-slate-100 border border-slate-200 hidden">
                    <h3 class="font-black text-xs mb-3 uppercase text-slate-400 tracking-widest">Logic & Explanation</h3>
                    <p id="explanation-text" class="text-sm leading-relaxed font-medium"></p>
                </div>
            </div>

            <!-- Footer Controls -->
            <div class="p-6 border-t border-slate-100 bg-white flex justify-between items-center">
                <button id="prev-btn" class="px-6 py-3 text-sm font-extrabold text-slate-600 bg-slate-100 rounded-xl hover:bg-slate-200 disabled:opacity-30 disabled:cursor-not-allowed transition-all">
                    PREVIOUS
                </button>
                <button id="hint-btn" class="text-xs font-black text-blue-600 hover:underline tracking-tighter uppercase transition">
                    Paragraph Reference
                </button>
                <button id="next-btn" class="px-8 py-3 text-sm font-black text-white bg-blue-600 rounded-xl hover:bg-blue-700 shadow-md shadow-blue-200 transition-all uppercase">
                    NEXT
                </button>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-10 text-center border border-white/20">
            <div class="mb-8 inline-flex p-6 bg-emerald-50 text-emerald-600 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <h2 class="text-4xl font-black text-slate-800 mb-2">Simulation Complete</h2>
            <p class="text-slate-500 font-medium mb-10 italic">Academic proficiency analysis finished.</p>
            
            <div class="grid grid-cols-2 gap-6 mb-10">
                <div class="p-6 bg-slate-50 rounded-2xl border border-slate-100">
                    <span class="block text-5xl font-black text-blue-600" id="final-score">0</span>
                    <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Overall Score / 30</span>
                </div>
                <div id="section-breakdown" class="text-left space-y-3 py-2 px-6 border-l-2 border-slate-100">
                    <!-- Section scores -->
                </div>
            </div>

            <button id="review-btn" class="w-full py-5 bg-slate-800 text-white rounded-2xl font-black text-lg hover:bg-slate-900 transition-all shadow-xl hover:scale-[1.02] active:scale-95">
                REVIEW INCORRECT ANSWERS
            </button>
        </div>
    </div>
</div>

<script>
    // --- PASSAGE DATA ---
    const passages = {
        "Life Science": `
            <h2 class="text-3xl font-black mb-6 text-slate-800">The Mycelial Network: The "Wood Wide Web"</h2>
            <p><strong>[Paragraph 1]</strong> Beneath the terrestrial surface of temperate forests lies an intricate and high-density lattice of fungal filaments known as mycelia. While fungi have traditionally been categorized primarily as decomposers, recent advancements in mycology reveal a far more sophisticated ecological role: the facilitation of a symbiotic inter-organismal communication network. This "mycorrhizal network" connects the roots of disparate tree species through a subterranean web of hyphae. Rather than operating as isolated biological units, forest trees are integrated into a collective system that manages resource distribution, including water, nitrogen, and phosphorus. This revelation fundamentally challenges the "survival of the fittest" paradigm, suggesting that forest ecosystems rely as much on mutualism and cooperation as they do on individual competition.</p>
            <p><strong>[Paragraph 2]</strong> The physiological mechanics of this exchange are <span class="highlight">governed</span> by a complex chemical signaling protocol. Mycorrhizal fungi serve as the conduits, receiving carbon-rich sugars from trees (produced via photosynthesis) in exchange for essential soil minerals. However, the network's function extends beyond mere nutrient bartering. Studies utilizing isotopic tracers have demonstrated that older "Mother Trees" can identify their own kin and prioritize them for nutrient delivery, particularly in low-light understory conditions where sapling survival is tenuous. Furthermore, when a host tree is under attack by pathogens or insect infestations, it releases volatile organic compounds and chemical distress signals into the mycelial web. These "early warning" signals allow neighboring trees to preemptively activate their immune responses, synthesizing defensive tannins and enzymes before the threat reaches them.</p>
            <p><strong>[Paragraph 3]</strong> Despite the apparent altruism of the Wood Wide Web, the relationship is not devoid of exploitation. Some plant species, such as the ghost pipe (<em>Monotropa uniflora</em>), have evolved to become "myco-heterotrophs." These plants lack chlorophyll and therefore cannot photosynthesize; instead, they "hack" into the mycelial network to siphon nutrients without contributing any carbon in return. This parasitic behavior indicates that the network is a contested space, subject to biological subversion. Additionally, the network's efficiency is highly sensitive to anthropogenic disruptions. Nitrogen-rich fertilizers and heavy soil compaction can degrade fungal health, potentially severing the lines of communication and rendering forest stands more vulnerable to climate-induced stressors.</p>
            <p><strong>[Paragraph 4]</strong> The implications of mycelial connectivity extend to forest resilience and carbon sequestration. A healthy network stabilizes the soil architecture, preventing erosion and enhancing the forest's capacity to store carbon in the ground rather than releasing it into the atmosphere. As global temperatures rise, the ability of trees to communicate and share resources may be the determining factor in whether a forest can adapt to shifting precipitation patterns or succumb to desertification. Understanding the hidden architecture of the forest floor is no longer a niche biological pursuit; it is central to developing robust conservation strategies for the 21st century.</p>
        `,
        "Social Science": `
            <h2 class="text-3xl font-black mb-6 text-slate-800">The Architecture of Surveillance: The Panopticon</h2>
            <p><strong>[Paragraph 1]</strong> In the late 18th century, philosopher Jeremy Bentham conceptualized a revolutionary architectural model for institutional control: the Panopticon. Designed originally as a prison, the structure features a circular building with individual cells around the perimeter, all facing a central observation tower. The ingenuity of the design lies in the "asymmetry of visibility." While the supervisor in the tower can observe any prisoner at any time, the prisoners—shielded by blinds or lighting effects—cannot see into the tower. This constant possibility of being watched forces individuals to regulate their own behavior, internalizing the gaze of authority. Bentham argued that this was the most efficient way to manage large populations, transitioning from the "spectacle of punishment" to the "discipline of surveillance."</p>
            <p><strong>[Paragraph 2]</strong> Michel Foucault later expanded upon Bentham's physical architecture to describe the broader "disciplinary society." Foucault posited that the Panopticon was not just a prison layout but a <span class="highlight">template</span> for modern social institutions, including schools, factories, and hospitals. In these spaces, individuals are categorized, examined, and documented. This data-driven approach creates a "norm" against which all behavior is measured. Deviance is no longer punished through physical violence but corrected through "normalization"—the subtle pressure to conform to societal expectations. The Panoptic model thus serves as a mechanism for producing "docile bodies" that are both economically productive and politically obedient.</p>
            <p><strong>[Paragraph 3]</strong> The digital age has birthed a new iteration of this concept: the "Electronic Panopticon." In the contemporary landscape, surveillance is no longer tethered to a physical tower but is distributed across digital networks. Every interaction—social media posts, credit card transactions, and GPS data—is logged and analyzed. Unlike Bentham's model, where the observer was a singular human authority, the digital Panopticon utilizes algorithms and "Big Data" to predict and influence behavior. The invisibility of the observer remains, but the scope of the surveillance has expanded from the walls of a prison to the entirety of human existence. The psychological effect is identical: individuals self-censor their digital presence to avoid social or professional repercussions.</p>
            <p><strong>[Paragraph 4]</strong> Critics of Panoptic surveillance argue that it erodes the fundamental right to privacy and stifles creativity. The constant pressure of the "gaze" encourages a culture of conformity, where radical ideas or unconventional lifestyles are viewed as risks to be mitigated. Furthermore, the centralization of such vast amounts of data creates a power imbalance between the state (or private corporations) and the citizenry. However, proponents argue that digital surveillance is essential for national security and the efficient delivery of public services. The tension between security and privacy remains one of the defining ethical dilemmas of the modern era, as society grapples with an architectural legacy that has moved from stone walls to lines of code.</p>
        `,
        "Physical Science": `
            <h2 class="text-3xl font-black mb-6 text-slate-800">The Quantum Zeno Effect</h2>
            <p><strong>[Paragraph 1]</strong> In the counterintuitive realm of quantum mechanics, the mere act of observation can fundamentally alter the state of a physical system. One of the most striking examples of this phenomenon is the Quantum Zeno Effect (QZE). Named after the Greek philosopher Zeno of Elea, whose paradoxes challenged the nature of motion, the QZE suggests that a quantum system can be "frozen" in its current state if it is observed with sufficient frequency. In essence, a continuously observed unstable particle will never decay. This occurs because the act of measurement forces the system into an "eigenstate"—a specific, definite condition—effectively resetting the clock on its probability-driven evolution.</p>
            <p><strong>[Paragraph 2]</strong> To understand this, one must first <span class="highlight">grasp</span> the concept of wave-function collapse. According to the Copenhagen interpretation, a quantum system exists in a "superposition" of all possible states until a measurement is performed. Measurement "collapses" the wave function into a single state. Between measurements, the system's state begins to "evolve" or spread out again according to the Schrödinger equation. However, if the interval between measurements is extremely short, the system has virtually no time to evolve away from its initial state. Each measurement finds the system in its original condition, thus inhibiting any transition or decay that would otherwise occur naturally over time.</p>
            <p><strong>[Paragraph 3]</strong> Experimental verification of the QZE was first achieved in 1989 using laser-cooled ions. By repeatedly pulsing a laser to "check" the state of the ions, researchers were able to prevent them from transitioning to a different energy level. Since then, the QZE has moved from a theoretical curiosity to a practical tool in quantum computing and precision metrology. In quantum computers, maintaining "coherence"—the delicate state of superposition required for calculations—is a primary challenge. The QZE offers a potential method for "error correction" by preventing qubits from decohering due to environmental noise, effectively pinning the quantum information in place through strategic observation.</p>
            <p><strong>[Paragraph 4]</strong> Conversely, the "Anti-Zeno Effect" (AZE) has also been observed, where frequent measurements actually accelerate the decay of a quantum system. The outcome—whether the system is frozen or forced to change faster—depends on the specific structure of the environment and the frequency of the measurements. These effects demonstrate that at the most fundamental level, the universe is not a static collection of objects waiting to be discovered, but a dynamic web of interactions where the observer is an active participant. The boundary between the "viewer" and the "viewed" is not a clear line, but a blurred zone of probabilistic entanglement.</p>
        `
    };

    // --- QUESTIONS DATA (30 TOTAL) ---
    const questions = [
        // Life Science: 1-10
        { topic: "Life Science", text: "According to paragraph 1, what is the primary function of the 'mycorrhizal network'?", options: ["To facilitate the decomposition of dead organic matter.", "To serve as an isolated biological unit for each tree.", "To connect tree roots for the exchange of resources and information.", "To protect the soil from being colonized by invasive fungi."], answer: 2, hint: "Check Paragraph 1: 'connects the roots of disparate tree species'." , explanation: "The text states the network connects roots to manage resource distribution like water and minerals." },
        { topic: "Life Science", text: "The word 'governed' in paragraph 2 is closest in meaning to:", options: ["Challenged", "Controlled", "Interrupted", "Replaced"], answer: 1, hint: "Context: 'The physiological mechanics... are governed by a complex chemical signaling protocol.'", explanation: "In this context, 'governed' means the mechanics are directed or controlled by the signaling protocol." },
        { topic: "Life Science", text: "According to paragraph 2, how do trees react when they receive a distress signal through the mycelial network?", options: ["They immediately stop the production of carbon-rich sugars.", "They prioritize nutrient delivery to non-kin saplings.", "They begin synthesizing defensive chemicals before being attacked.", "They disconnect their roots from the hyphae to prevent infection."], answer: 2, hint: "Paragraph 2: 'activate their immune responses, synthesizing defensive tannins...'", explanation: "The text explains neighbor trees preemptively activate immunity using defensive enzymes." },
        { topic: "Life Science", text: "Which of the following is NOT mentioned in paragraph 3 as a threat to the mycelial network?", options: ["The presence of parasitic plants like the ghost pipe.", "The application of fertilizers rich in nitrogen.", "Soil compaction caused by human activity.", "An increase in the diversity of tree species in the forest."], answer: 3, hint: "Paragraph 3 lists 'myco-heterotrophs', 'nitrogen-rich fertilizers', and 'heavy soil compaction'.", explanation: "Tree diversity is not mentioned as a threat; in fact, the passage implies diversity is part of the system." },
        { topic: "Life Science", text: "Why does the author mention the 'ghost pipe' in paragraph 3?", options: ["To illustrate how the network can be exploited by non-contributing species.", "To provide an example of a tree species that benefits the most from the web.", "To show that chlorophyll is necessary for a plant to join the network.", "To explain how fungi are protected from parasitic plants."], answer: 0, hint: "Paragraph 3: 'hack into the mycelial network to siphon nutrients without contributing any carbon'.", explanation: "The ghost pipe is used as an example of 'biological subversion' or exploitation." },
        { topic: "Life Science", text: "In paragraph 4, the author suggests that the mycelial network is crucial for climate change because:", options: ["It prevents forests from growing too quickly in warmer weather.", "It helps trees adapt to changing rain patterns through resource sharing.", "It allows trees to migrate to cooler environments more efficiently.", "It reduces the amount of oxygen released by the forest into the atmosphere."], answer: 1, hint: "Paragraph 4: 'determine... whether a forest can adapt to shifting precipitation patterns'.", explanation: "The text links the ability to share resources to forest survival during shifts in precipitation." },
        { topic: "Life Science", text: "What can be inferred from paragraph 1 about the 'survival of the fittest' theory?", options: ["It is the only correct way to view forest evolution.", "It may not fully account for the role of cooperation in ecosystems.", "It was originally proposed by mycologists studying fungi.", "It explains why Mother Trees prioritize their own offspring."], answer: 1, hint: "Paragraph 1: 'fundamentally challenges the survival of the fittest paradigm'.", explanation: "The text suggests mutualism is just as important as individual competition, challenging the exclusivity of that paradigm." },
        { topic: "Life Science", text: "Which of the following best describes the rhetorical purpose of the phrase 'Wood Wide Web'?", options: ["To mock the idea that trees can communicate.", "To provide a scientific name for the hyphae filaments.", "To create a familiar analogy for a complex biological system.", "To argue that forests should be used for telecommunications."], answer: 2, hint: "Paragraph 1: Introduction of the term in quotes.", explanation: "It is a metaphor used to help readers understand the connectivity of the forest through an analogy to the internet." },
        { topic: "Life Science", text: "Sentence Insertion: 'This underground system acts as a biological buffer against environmental volatility.' Where would this fit best?", options: ["After the first sentence of Para 4.", "Before the mention of 'Mother Trees' in Para 2.", "At the very beginning of Para 1.", "After the mention of 'desertification' in Para 4."], answer: 0, hint: "Look for context regarding 'resilience' and 'volatility'.", explanation: "Paragraph 4 discusses forest resilience and adaptation, making it the logical home for a sentence about environmental buffers." },
        { topic: "Life Science", text: "According to the passage, what do fungi receive from trees in this relationship?", options: ["Essential soil minerals like phosphorus.", "Distress signals from other plants.", "Sugars created through photosynthesis.", "Protection from heavy soil compaction."], answer: 2, hint: "Paragraph 2: 'receiving carbon-rich sugars from trees... in exchange for... minerals'.", explanation: "Trees provide carbon-rich sugars (food) to the fungi in exchange for the minerals the fungi harvest from the soil." },

        // Social Science: 11-20
        { topic: "Social Science", text: "What is the 'asymmetry of visibility' mentioned in paragraph 1?", options: ["The idea that prisoners can see the tower, but the tower is empty.", "The fact that the observer can see the subjects, but the subjects cannot see the observer.", "The circular design of the cells that makes all prisoners see each other.", "A lighting effect that makes the central tower invisible to the public."], answer: 1, hint: "Paragraph 1: 'supervisor... can observe any prisoner... prisoners... cannot see into the tower'.", explanation: "The text defines it as the central supervisor seeing everyone while remaining unobserved." },
        { topic: "Social Science", text: "The word 'template' in paragraph 2 is closest in meaning to:", options: ["Building", "Model", "Barrier", "Requirement"], answer: 1, hint: "Context: '...was not just a prison layout but a template for modern social institutions'.", explanation: "In this context, 'template' refers to a blueprint or model that other institutions follow." },
        { topic: "Social Science", text: "According to Foucault in paragraph 2, how is deviance primarily handled in a 'disciplinary society'?", options: ["Through public spectacles of physical punishment.", "By ignoring it until the individual conforms naturally.", "Through 'normalization' and the pressure to meet societal standards.", "By removing individuals from the data-driven systems entirely."], answer: 2, hint: "Paragraph 2: 'Deviance is no longer punished through physical violence but corrected through normalization'.", explanation: "Foucault argues that subtle pressure to conform (normalization) replaces physical violence." },
        { topic: "Social Science", text: "Which of the following is NOT a feature of the 'Electronic Panopticon' mentioned in paragraph 3?", options: ["The use of GPS data to track location.", "The physical presence of a central observation tower.", "The analysis of social media interactions.", "The utilization of predictive algorithms."], answer: 1, hint: "Paragraph 3: 'surveillance is no longer tethered to a physical tower'.", explanation: "The text explicitly states the digital version is 'distributed' and lacks the physical tower of the original." },
        { topic: "Social Science", text: "Why does the author use the phrase 'docile bodies' in paragraph 2?", options: ["To describe prisoners who have lost the will to live.", "To refer to individuals who are obedient and economically productive.", "To explain why hospitals are designed with circular corridors.", "To argue that modern citizens are physically weaker than their ancestors."], answer: 1, hint: "Paragraph 2: 'producing docile bodies that are both economically productive and politically obedient'.", explanation: "The term describes the intended outcome of disciplinary surveillance: obedience and productivity." },
        { topic: "Social Science", text: "According to paragraph 4, what do proponents of digital surveillance argue?", options: ["It is the primary cause of social conformity.", "It is necessary for maintaining national security.", "It helps individuals express their creativity.", "It reduces the power imbalance between state and citizen."], answer: 1, hint: "Paragraph 4: 'proponents argue that digital surveillance is essential for national security'.", explanation: "The passage notes that security is the main justification used by supporters of surveillance." },
        { topic: "Social Science", text: "The author implies that the 'Electronic Panopticon' is more pervasive than Bentham's model because:", options: ["It uses light and blinds more effectively.", "It is managed by a single human authority in a tower.", "It covers nearly every aspect of human life through data tracking.", "It is only used in prisons and factories."], answer: 2, hint: "Paragraph 3: 'scope... has expanded... to the entirety of human existence'.", explanation: "The digital version tracks all digital interactions, making its reach much broader than a single building." },
        { topic: "Social Science", text: "The word 'regulation' (implied as regulate) in paragraph 1 refers to:", options: ["The creation of new laws by the government.", "The self-control exercised by individuals who feel they are being watched.", "The technical maintenance of the central tower's lighting.", "The distribution of food and supplies to prisoners."], answer: 1, hint: "Paragraph 1: 'forces individuals to regulate their own behavior'.", explanation: "In the Panopticon, 'regulation' refers to internal self-censorship and self-discipline." },
        { topic: "Social Science", text: "What is the rhetorical purpose of paragraph 4?", options: ["To provide a final decision on which side is correct.", "To present the conflicting viewpoints regarding surveillance and privacy.", "To list the specific algorithms used in digital tracking.", "To describe the physical destruction of the original Panopticon."], answer: 1, hint: "Paragraph 4: 'Critics... argue... However, proponents argue...'.", explanation: "The paragraph outlines the ethical debate between privacy/creativity and security/efficiency." },
        { topic: "Social Science", text: "Sentence Insertion: 'This internal self-discipline is far more cost-effective than constant physical force.' Where would this fit best?", options: ["After the sentence mentioning 'asymmetry of visibility' in Para 1.", "At the end of Para 1.", "Before the definition of 'norm' in Para 2.", "After the mention of 'GPS data' in Para 3."], answer: 1, hint: "Look for where Bentham's efficiency argument is discussed.", explanation: "It concludes the logic of Paragraph 1, where Bentham argues for efficiency through internalized surveillance." },

        // Physical Science: 21-30
        { topic: "Physical Science", text: "According to paragraph 1, what happens to an unstable particle if it is observed continuously?", options: ["It will decay faster than usual.", "It will transform into a stable element like iron.", "It will remain in its current state and never decay.", "It will vanish from the physical system entirely."], answer: 2, hint: "Paragraph 1: 'a continuously observed unstable particle will never decay'.", explanation: "The QZE suggests that frequent observation 'freezes' the particle's state." },
        { topic: "Physical Science", text: "The word 'grasp' in paragraph 2 is closest in meaning to:", options: ["Hold", "Understand", "Reject", "Observe"], answer: 1, hint: "Context: 'To understand this, one must first grasp the concept of wave-function collapse.'", explanation: "In this context, to 'grasp' a concept means to comprehend or understand it." },
        { topic: "Physical Science", text: "According to the 'Copenhagen interpretation' in paragraph 2, what causes the wave function to collapse?", options: ["The natural evolution of the Schrödinger equation.", "The passage of a specific amount of time.", "The act of performing a measurement.", "The cooling of ions with a laser."], answer: 2, hint: "Paragraph 2: 'Measurement collapses the wave function into a single state.'", explanation: "The text defines collapse as the result of a measurement/observation." },
        { topic: "Physical Science", text: "How can the Quantum Zeno Effect be useful in quantum computing?", options: ["By speeding up the decay of unstable qubits.", "By allowing computers to operate at room temperature.", "By preventing qubits from losing their quantum information due to environmental noise.", "By creating a perfect vacuum for the ions."], answer: 2, hint: "Paragraph 3: 'preventing qubits from decohering due to environmental noise'.", explanation: "The QZE can pin quantum states in place, protecting them from 'decoherence'." },
        { topic: "Physical Science", text: "The word 'inhibiting' in paragraph 2 is closest in meaning to:", options: ["Allowing", "Encouraging", "Preventing", "Predicting"], answer: 2, hint: "Context: '...thus inhibiting any transition or decay...'", explanation: "Inhibiting means slowing down or preventing a process." },
        { topic: "Physical Science", text: "What determines whether the Zeno Effect or the Anti-Zeno Effect occurs?", options: ["The type of laser used for cooling.", "The environmental structure and measurement frequency.", "The age of the quantum system being measured.", "The specific philosopher who named the effect."], answer: 1, hint: "Paragraph 4: 'depends on the specific structure of the environment and the frequency of the measurements'.", explanation: "The text states the outcome is environment and frequency dependent." },
        { topic: "Physical Science", text: "According to paragraph 3, what was used in the 1989 experiment to 'check' the state of the ions?", options: ["A mechanical probe.", "A continuous stream of water.", "Repeated pulses of a laser.", "A magnetic field."], answer: 2, hint: "Paragraph 3: 'repeatedly pulsing a laser to check the state of the ions'.", explanation: "Laser pulses were the method of measurement in the first QZE experiment." },
        { topic: "Physical Science", text: "Which of the following is NOT true about the Anti-Zeno Effect (AZE)?", options: ["It can accelerate the decay of a quantum system.", "It was observed as a contrast to the QZE.", "It only occurs in the absence of an observer.", "It depends on the frequency of measurements."], answer: 2, hint: "Paragraph 4: discusses the AZE as a result of 'frequent measurements'.", explanation: "AZE requires measurements, so saying it occurs in the 'absence of an observer' is incorrect." },
        { topic: "Physical Science", text: "What can be inferred about the 'eigenstate' from paragraph 1?", options: ["It is a state of constant change.", "It is a definite and specific condition forced by measurement.", "It only exists in the presence of heat.", "It is the state a particle reaches after it has fully decayed."], answer: 1, hint: "Paragraph 1: 'forces the system into an eigenstate—a specific, definite condition'.", explanation: "The text directly defines an eigenstate as a specific condition resulting from measurement." },
        { topic: "Physical Science", text: "Sentence Insertion: 'This effectively creates a feedback loop where the observer and the system are inseparable.' Where would this fit best?", options: ["At the end of Para 4.", "Before the first sentence of Para 1.", "After the mention of '1989' in Para 3.", "Before the mention of 'Anti-Zeno Effect' in Para 4."], answer: 0, hint: "Look for themes of participation and blurred boundaries.", explanation: "Paragraph 4 discusses the blurred line between viewer and viewed, making this an ideal concluding thought." }
    ];

    let currentQuestionIndex = 0;
    let userAnswers = new Array(questions.length).fill(null);
    let isReviewMode = false;
    let timerInterval;
    let secondsElapsed = 0;

    // DOM Elements
    const passageContent = document.getElementById('passage-content');
    const questionText = document.getElementById('question-text');
    const optionsList = document.getElementById('options-list');
    const feedbackArea = document.getElementById('feedback-area');
    const explanationText = document.getElementById('explanation-text');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const hintBtn = document.getElementById('hint-btn');
    const hintBox = document.getElementById('hint-box');
    const progressText = document.getElementById('progress-text');
    const progressBar = document.getElementById('progress-bar');
    const topicBadge = document.getElementById('topic-badge');
    const resultsScreen = document.getElementById('results-screen');
    const timerDisplay = document.getElementById('timer-display');

    function startTimer() {
        timerInterval = setInterval(() => {
            secondsElapsed++;
            const hrs = String(Math.floor(secondsElapsed / 3600)).padStart(2, '0');
            const mins = String(Math.floor((secondsElapsed % 3600) / 60)).padStart(2, '0');
            const secs = String(secondsElapsed % 60).padStart(2, '0');
            timerDisplay.innerText = `${hrs}:${mins}:${secs}`;
        }, 1000);
    }

    function initQuiz() {
        startTimer();
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQuestionIndex];
        
        // Update Metadata
        progressText.innerText = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
        progressBar.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
        topicBadge.innerText = q.topic.toUpperCase();
        
        // Update Passage Side
        passageContent.innerHTML = passages[q.topic];
        
        // Scroll to top of passage when topic changes
        if (currentQuestionIndex === 0 || questions[currentQuestionIndex].topic !== questions[currentQuestionIndex-1]?.topic) {
            document.getElementById('passage-container').scrollTop = 0;
        }

        // Reset Hint
        hintBox.classList.add('hidden');
        
        // Update Question
        questionText.innerText = q.text;
        optionsList.innerHTML = '';
        
        q.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = `w-full text-left p-5 rounded-2xl border border-slate-200 transition-all flex items-start group shadow-sm hover:border-blue-300`;
            
            const label = String.fromCharCode(65 + index); // A, B, C, D
            btn.innerHTML = `
                <span class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-400 mr-5 group-hover:bg-blue-600 group-hover:text-white transition-all text-sm shrink-0">${label}</span> 
                <span class="flex-grow pt-2 text-sm font-semibold leading-relaxed">${opt}</span>
            `;
            
            // Handle Selection
            if (userAnswers[currentQuestionIndex] === index) {
                btn.classList.add('selected');
                const span = btn.querySelector('span');
                span.classList.remove('bg-slate-100', 'text-slate-400');
                span.classList.add('bg-blue-600', 'text-white');
            }

            if (isReviewMode) {
                if (index === q.answer) {
                    btn.classList.add('correct');
                    const span = btn.querySelector('span');
                    span.classList.remove('bg-slate-100', 'text-slate-400', 'bg-blue-600');
                    span.classList.add('bg-emerald-600', 'text-white');
                } else if (userAnswers[currentQuestionIndex] === index) {
                    btn.classList.add('incorrect');
                    const span = btn.querySelector('span');
                    span.classList.remove('bg-slate-100', 'text-slate-400', 'bg-blue-600');
                    span.classList.add('bg-rose-600', 'text-white');
                }
                btn.disabled = true;
                btn.classList.remove('hover:border-blue-300');
            } else {
                btn.onclick = () => selectOption(index);
            }
            
            optionsList.appendChild(btn);
        });

        // Show Feedback in Review Mode
        if (isReviewMode) {
            feedbackArea.classList.remove('hidden');
            explanationText.innerHTML = q.explanation;
            explanationText.className = "text-sm leading-relaxed font-medium " + (userAnswers[currentQuestionIndex] === q.answer ? "text-emerald-800" : "text-slate-700");
        } else {
            feedbackArea.classList.add('hidden');
        }

        // Nav Buttons
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.innerText = currentQuestionIndex === questions.length - 1 ? (isReviewMode ? "RESTART" : "FINISH") : "NEXT";
    }

    function selectOption(index) {
        userAnswers[currentQuestionIndex] = index;
        renderQuestion();
    }

    function nextQuestion() {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            renderQuestion();
            document.getElementById('question-area').scrollTop = 0;
        } else {
            if (isReviewMode) {
                location.reload();
            } else {
                clearInterval(timerInterval);
                showResults();
            }
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            renderQuestion();
            document.getElementById('question-area').scrollTop = 0;
        }
    }

    function showHint() {
        hintBox.innerText = questions[currentQuestionIndex].hint;
        hintBox.classList.toggle('hidden');
    }

    function showResults() {
        resultsScreen.classList.remove('hidden');
        
        let score = 0;
        userAnswers.forEach((ans, i) => {
            if (ans === questions[i].answer) score++;
        });
        
        document.getElementById('final-score').innerText = score;
        
        // Breakdown
        const breakdown = document.getElementById('section-breakdown');
        breakdown.innerHTML = `
            <div class="space-y-2">
                <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Performance Breakdown</p>
                <div class="flex justify-between items-center">
                    <span class="text-xs font-bold text-slate-600">LIFE SCIENCE</span>
                    <span class="text-sm font-black text-blue-600">${calculateSection(0, 9)} / 10</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-xs font-bold text-slate-600">SOCIAL SCIENCE</span>
                    <span class="text-sm font-black text-blue-600">${calculateSection(10, 19)} / 10</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-xs font-bold text-slate-600">PHYSICAL SCIENCE</span>
                    <span class="text-sm font-black text-blue-600">${calculateSection(20, 29)} / 10</span>
                </div>
            </div>
        `;
    }

    function calculateSection(start, end) {
        let s = 0;
        for(let i=start; i<=end; i++) {
            if(userAnswers[i] === questions[i].answer) s++;
        }
        return s;
    }

    function reviewMistakes() {
        isReviewMode = true;
        currentQuestionIndex = 0;
        resultsScreen.classList.add('hidden');
        renderQuestion();
    }

    // Event Listeners
    nextBtn.onclick = nextQuestion;
    prevBtn.onclick = prevQuestion;
    hintBtn.onclick = showHint;
    document.getElementById('review-btn').onclick = reviewMistakes;

    // Start
    initQuiz();
</script>
</body>
</html>
