<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEFL iBT Reading Practice Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        .correct { background-color: #d1fae5; border-color: #10b981; }
        .incorrect { background-color: #fee2e2; border-color: #ef4444; }
        .selected { border: 2px solid #3b82f6; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans leading-relaxed">

<div id="app" class="max-w-5xl mx-auto p-4 md:p-8">
    <!-- Header -->
    <header class="mb-8 text-center">
        <h1 class="text-3xl font-bold text-blue-800">TOEFL iBT Reading Practice</h1>
        <p class="text-gray-600 mt-2">30 Questions | Academic Level 12-14</p>
    </header>

    <!-- Quiz Container -->
    <div id="quiz-container" class="bg-white shadow-xl rounded-xl p-6 border border-gray-200">
        
        <!-- Progress Bar -->
        <div class="mb-6">
            <div class="flex justify-between text-sm mb-1">
                <span id="progress-text">Question 1 of 30</span>
                <span id="score-text" class="font-semibold"></span>
            </div>
            <div class="w-full bg-gray-200 h-2 rounded-full">
                <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 3.33%"></div>
            </div>
        </div>

        <!-- Question Section -->
        <div id="question-area">
            <div id="passage-ref" class="mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400 italic text-sm text-gray-700">
                <!-- Hint/Paragraph Ref goes here -->
            </div>
            
            <h2 id="question-text" class="text-xl font-semibold mb-6"></h2>

            <div id="options-list" class="space-y-3">
                <!-- Options go here -->
            </div>
        </div>

        <!-- Feedback Area (Hidden during test) -->
        <div id="feedback-area" class="mt-8 p-4 rounded-lg hidden">
            <p id="explanation-text" class="text-sm"></p>
        </div>

        <!-- Navigation -->
        <div class="mt-8 flex justify-between items-center">
            <button id="prev-btn" class="px-6 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50">Previous</button>
            <button id="hint-btn" class="text-blue-600 hover:underline text-sm font-medium">Show Hint</button>
            <button id="next-btn" class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Next Question</button>
        </div>
    </div>

    <!-- Results Screen (Hidden) -->
    <div id="results-screen" class="hidden text-center bg-white shadow-xl rounded-xl p-8 border border-gray-200">
        <h2 class="text-4xl font-bold text-blue-800 mb-4">Practice Complete</h2>
        <p class="text-2xl mb-6">Your Score: <span id="final-score">0</span> / 30</p>
        <div id="score-breakdown" class="mb-8 text-left max-w-md mx-auto"></div>
        <button onclick="reviewMistakes()" class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold transition">Review All Answers</button>
    </div>
</div>

<script>
    const questions = [
        // PASSAGE 1: LIFE SCIENCE (1-10)
        {
            passage: "Life Science",
            text: "According to paragraph 1, what distinguished the Cambrian organisms from the Ediacaran biota?",
            options: [
                "The presence of simple multicellular structures.",
                "The lack of bilateral symmetry in Cambrian forms.",
                "The development of complex body plans and specialized tissues.",
                "The dominance of organisms that were largely nomadic."
            ],
            answer: 2,
            hint: "Refer to Paragraph 1: Mention of 'complex body plans, specialized tissues, and bilateral symmetry'.",
            explanation: "Correct: The text states Ediacaran life lacked the complex body plans and specialized tissues found in Cambrian animals. Incorrect: (1) Ediacaran life already had simple multicellularity; (2) Cambrian forms introduced bilateral symmetry, they didn't lack it; (4) Mobility isn't the primary distinction mentioned."
        },
        {
            passage: "Life Science",
            text: "Which of the following is NOT mentioned in paragraph 2 as a function of Hox genes?",
            options: [
                "Regulating the expression of other genes.",
                "Determining the longitudinal positioning of body parts.",
                "Ensuring limbs develop in the correct locations.",
                "Triggering the synthesis of collagen for structural support."
            ],
            answer: 3,
            hint: "Refer to Paragraph 2 and Paragraph 4 for collagen details.",
            explanation: "Correct: Paragraph 4 attributes collagen synthesis to oxygen levels, not Hox genes. (1, 2, 3) are all explicitly stated functions of Hox genes in paragraph 2."
        },
        {
            passage: "Life Science",
            text: "The word 'plasticity' in paragraph 2 is closest in meaning to:",
            options: ["Rigidity", "Flexibility", "Fragility", "Complexity"],
            answer: 1,
            hint: "Refer to Paragraph 2: 'This genetic plasticity allowed for... diverse morphologies'.",
            explanation: "Correct: In this biological context, plasticity refers to the ability to be molded or adapted (flexibility)."
        },
        {
            passage: "Life Science",
            text: "Why does the author mention 'Anomalocaris' in paragraph 3?",
            options: [
                "To argue that the Burgess Shale is the only reliable source of Cambrian fossils.",
                "To provide an example of a specialized predator resulting from ecological 'arms races'.",
                "To illustrate the vulnerability of organisms with calcified shells.",
                "To suggest that predation was a minor factor in evolution."
            ],
            answer: 1,
            hint: "Refer to Paragraph 3: '...showcasing bizarre forms like Anomalocaris, a formidable predator'.",
            explanation: "Correct: It serves as a specific example of the offensive capabilities evolved during the 'arms race'. (3) is incorrect as Anomalocaris was the predator, not the shelled prey."
        },
        {
            passage: "Life Science",
            text: "It can be inferred from paragraph 4 that the synthesis of collagen was important because:",
            options: [
                "It allowed organisms to survive in low-oxygen environments.",
                "It was required for the development of more sophisticated, complex tissues.",
                "It prevented the flooding of continental shelves.",
                "It acted as a primary energy source for active metabolism."
            ],
            answer: 1,
            hint: "Refer to Paragraph 4: 'collagen, a structural protein essential for complex tissues'.",
            explanation: "Correct: The text links collagen to 'complex tissues' and notes it requires high oxygen. (3) is a separate geographical event; (4) collagen is structural, not an energy source."
        },
        {
            passage: "Life Science",
            text: "The word 'disparate' in paragraph 4 is closest in meaning to:",
            options: ["Similar", "Competitive", "Distinct", "Vanishing"],
            answer: 2,
            hint: "Refer to Paragraph 4: '...providing the 'real estate' necessary for disparate lineages to colonize'.",
            explanation: "Correct: 'Disparate' means essentially different in kind; distinct."
        },
        {
            passage: "Life Science",
            text: "Which of the following sentences best expresses the essential information in the highlighted sentence in paragraph 4? (Sentence: 'While no single factor can fully explain the Cambrian Explosion, it is increasingly viewed as a synergistic event where genetic readiness met favorable environmental conditions and intense ecological competition.')",
            options: [
                "The Cambrian Explosion was caused primarily by genetic factors despite environmental changes.",
                "Environmental conditions were the most important factor in the Cambrian Explosion.",
                "A combination of genetic, environmental, and ecological factors likely caused the Cambrian Explosion.",
                "Scientists still cannot explain the Cambrian Explosion due to a lack of evidence."
            ],
            answer: 2,
            hint: "Look for the option that captures 'synergistic' (combined effect).",
            explanation: "Correct: 'Synergistic' implies that multiple factors worked together. (1) and (2) overemphasize one factor."
        },
        {
            passage: "Life Science",
            text: "According to the passage, what ecological change occurred during the Cambrian?",
            options: [
                "The extinction of all Ediacaran biota.",
                "The rise of predation and a biological 'arms race'.",
                "A decrease in the metabolic demands of mobile organisms.",
                "The disappearance of continental shelves."
            ],
            answer: 1,
            hint: "Refer to Paragraph 3.",
            explanation: "Correct: Paragraph 3 explicitly describes the rise of predation and the ensuing arms race. (3) is the opposite of the truth (demands increased)."
        },
        {
            passage: "Life Science",
            text: "The author's rhetorical purpose in paragraph 2 is to:",
            options: [
                "Contrast the Cambrian with the Ediacaran period.",
                "Explain the genetic mechanisms that allowed for morphological diversity.",
                "Argue that oxygen was the sole cause of the explosion.",
                "Describe the physical appearance of early chordates."
            ],
            answer: 1,
            hint: "Refer to Paragraph 2's focus on Hox genes.",
            explanation: "Correct: The paragraph focuses on how the 'genetic toolkit' provided developmental flexibility. (1) was done in Para 1; (3) is incorrect."
        },
        {
            passage: "Life Science",
            text: "Sentence Insertion: 'This regulatory oversight allowed for the rapid experimentation with body shapes without compromising basic survival.' Where would this best fit?",
            options: [
                "After the mention of Hox gene clusters.",
                "At the end of the discussion on collagen.",
                "Before the mention of the Ediacaran biota.",
                "After the mention of sea levels."
            ],
            answer: 0,
            hint: "Look for keywords like 'regulatory oversight' which refers to Hox genes.",
            explanation: "Correct: This sentence expands on the function of the regulatory (Hox) genes discussed in Para 2."
        },

        // PASSAGE 2: SOCIAL SCIENCE (11-20)
        {
            passage: "Social Science",
            text: "The word 'profound' in paragraph 1 is closest in meaning to:",
            options: ["Minor", "Significant", "Ancient", "Troubling"],
            answer: 1,
            hint: "Refer to Paragraph 1: 'one of the most profound shifts in human social organization'.",
            explanation: "Correct: Profound here means having a deep or significant impact."
        },
        {
            passage: "Social Science",
            text: "According to paragraph 1, the Natufian culture was unique because:",
            options: [
                "They were the first to domesticate animals.",
                "They lived in sedentary villages before they started farming.",
                "They remained nomadic despite having stable food sources.",
                "They were the only culture in the Levant during the Epipaleolithic."
            ],
            answer: 1,
            hint: "Refer to Paragraph 1: '...a change that predated the actual domestication...'",
            explanation: "Correct: The text states their sedentism predated farming, which challenged earlier models. (1) is incorrect as farming/domestication came later."
        },
        {
            passage: "Social Science",
            text: "The author mentions 'stone mortars and pestles' in paragraph 2 in order to:",
            options: [
                "Prove that the Natufians were primarily hunters.",
                "Show that Natufians had advanced metallurgy.",
                "Illustrate the heavy equipment that made mobility difficult.",
                "Explain how Natufians built their houses."
            ],
            answer: 2,
            hint: "Refer to Paragraph 2: '...heavy grinding equipment... once a group invested... the cost of moving increased'.",
            explanation: "Correct: Heavy equipment is used as an example of why staying in one place became more advantageous (cost of moving)."
        },
        {
            passage: "Social Science",
            text: "What does the 'Broad Spectrum Revolution' refer to in the context of the passage?",
            options: [
                "The evolution of compound eyes in predators.",
                "The transition to a wider, more intensive exploitation of varied local resources.",
                "The rapid increase in human birth rates.",
                "A technological shift from stone to bronze tools."
            ],
            answer: 1,
            hint: "Refer to Paragraph 2.",
            explanation: "Correct: It describes the exploitation of wild cereals and nuts that became available as the climate warmed."
        },
        {
            passage: "Social Science",
            text: "Which of the following is NOT a social repercussion of sedentism mentioned in paragraph 3?",
            options: [
                "Increased birth spacing.",
                "The emergence of social hierarchies.",
                "Need for conflict resolution mechanisms.",
                "Development of ritualized leadership."
            ],
            answer: 0,
            hint: "Refer to Paragraph 3: 'Sedentism often leads to a decrease in birth spacing'.",
            explanation: "Correct: The passage says birth spacing *decreased* (more frequent births), so 'increased birth spacing' is false. (2, 3, 4) are all mentioned."
        },
        {
            passage: "Social Science",
            text: "It can be inferred from paragraph 3 that larger permanent groups required new social structures because:",
            options: [
                "Kinship ties were no longer sufficient for managing larger numbers of people.",
                "Natural resources were becoming scarce.",
                "Nomadism was still seen as a superior lifestyle by many.",
                "The Natufians wanted to conquer neighboring regions."
            ],
            answer: 0,
            hint: "Refer to Paragraph 3: '...surpassed simple kinship ties'.",
            explanation: "Correct: The text explicitly mentions needing mechanisms that surpassed kinship ties for decision-making in larger groups."
        },
        {
            passage: "Social Science",
            text: "The word 'perils' in paragraph 4 is closest in meaning to:",
            options: ["Advantages", "Dangers", "Discoveries", "Mysteries"],
            answer: 1,
            hint: "Refer to Paragraph 4: '...was not without its perils'.",
            explanation: "Correct: Perils means dangers or serious risks."
        },
        {
            passage: "Social Science",
            text: "According to paragraph 4, how did the Natufians respond to the 'Younger Dryas'?",
            options: [
                "All Natufian groups immediately became farmers.",
                "Some groups became more mobile, while others began managing plants more actively.",
                "The Natufian culture completely disappeared.",
                "They moved to the Levant to find more water."
            ],
            answer: 1,
            hint: "Refer to Paragraph 4: 'Some Natufian groups were forced to return to a more mobile lifestyle, while others doubled down...'",
            explanation: "Correct: There were two distinct reactions noted in the text. (3) is false."
        },
        {
            passage: "Social Science",
            text: "Why does the author mention 'burial sites' in paragraph 3?",
            options: [
                "To show that Natufians were obsessed with death.",
                "To provide evidence for the emergence of social hierarchies.",
                "To argue that sedentary life was shorter than nomadic life.",
                "To illustrate the layout of Natufian villages."
            ],
            answer: 1,
            hint: "Refer to Paragraph 3: 'The appearance of elaborate burial sites... suggests the emergence of social hierarchies'.",
            explanation: "Correct: The passage uses burials as evidence for hierarchy and leadership."
        },
        {
            passage: "Social Science",
            text: "Sentence Insertion: 'This investment in heavy, stationary technology effectively anchored the population to specific locales.' Where would this best fit?",
            options: [
                "After the mention of stone mortars and pestles.",
                "Before the discussion on the Younger Dryas.",
                "At the very beginning of the passage.",
                "After the mention of decreased birth spacing."
            ],
            answer: 0,
            hint: "Keyword: 'stationary technology' refers to the mortars and pestles.",
            explanation: "Correct: It logically follows the description of heavy tools and explains their effect on sedentism."
        },

        // PASSAGE 3: PHYSICAL SCIENCE (21-30)
        {
            passage: "Physical Science",
            text: "According to paragraph 1, what was the primary composition of the universe immediately after the Big Bang?",
            options: [
                "A mix of all 118 known elements.",
                "Primarily iron and carbon.",
                "Mostly hydrogen and helium with a little lithium.",
                "Dense clouds of gold and platinum."
            ],
            answer: 2,
            hint: "Refer to Paragraph 1.",
            explanation: "Correct: The text states it consisted 'almost entirely of hydrogen and helium, with trace amounts of lithium'."
        },
        {
            passage: "Physical Science",
            text: "The word 'exhaust' in paragraph 2 is closest in meaning to:",
            options: ["Create", "Release", "Use up", "Pollute"],
            answer: 2,
            hint: "Refer to Paragraph 2: '...as these stars age and exhaust their core hydrogen'.",
            explanation: "Correct: In this context, exhaust means to deplete or use up the supply."
        },
        {
            passage: "Physical Science",
            text: "Why is iron considered a 'critical thermodynamic threshold' in stars?",
            options: [
                "Because iron is the lightest element a star can fuse.",
                "Because fusing iron consumes energy rather than releasing it.",
                "Because iron cores are the most stable part of a low-mass star.",
                "Because iron allows stars to live for billions of years."
            ],
            answer: 1,
            hint: "Refer to Paragraph 2: 'the fusion of nuclei heavier than iron is endothermic... consumes more energy than it releases'.",
            explanation: "Correct: Iron fusion is endothermic, stopping the energy production that counteracts gravity."
        },
        {
            passage: "Physical Science",
            text: "According to paragraph 3, the 'r-process' occurs during:",
            options: [
                "The Big Bang.",
                "The quiet hydrogen fusion of low-mass stars.",
                "A Type II supernova explosion.",
                "The gradual aging of a red giant."
            ],
            answer: 2,
            hint: "Refer to Paragraph 3: 'During this immense explosion... the r-process occurs'.",
            explanation: "Correct: The r-process requires the high neutron density found in supernovae. (4) describes the s-process."
        },
        {
            passage: "Physical Science",
            text: "What is the main difference between the 'r-process' and the 's-process'?",
            options: [
                "The r-process happens slowly, while the s-process is rapid.",
                "The r-process creates hydrogen, while the s-process creates iron.",
                "The r-process involves rapid neutron capture before decay, while the s-process is slower.",
                "There is no difference; they are two names for the same thing."
            ],
            answer: 2,
            hint: "Refer to Paragraph 3.",
            explanation: "Correct: Rapid vs. Slow refers to the rate of neutron capture relative to radioactive decay."
        },
        {
            passage: "Physical Science",
            text: "The word 'prolific' in paragraph 4 is closest in meaning to:",
            options: ["Productive", "Dangerous", "Scarce", "Ancient"],
            answer: 0,
            hint: "Refer to Paragraph 4: '...an even more prolific environment for the r-process'.",
            explanation: "Correct: Prolific means highly productive or fruitful."
        },
        {
            passage: "Physical Science",
            text: "What does the author imply by the quote 'we are made of starstuff'?",
            options: [
                "Humans are made of the same elements found in the Big Bang.",
                "The atoms in our bodies were forged in the life and death of stars.",
                "Stars are composed of biological material.",
                "We can only survive by eating food grown in space."
            ],
            answer: 1,
            hint: "Refer to Paragraph 4: '...the very atoms in the human body are the literal remnants of stellar death'.",
            explanation: "Correct: It summarizes the fact that heavy elements in our bodies originated in stars."
        },
        {
            passage: "Physical Science",
            text: "According to paragraph 4, what is a 'kilonova'?",
            options: [
                "A type of low-mass star.",
                "The explosion that happens when a star first begins to fuse helium.",
                "An event following the merger of two neutron stars.",
                "A cloud of gas that forms after the Big Bang."
            ],
            answer: 2,
            hint: "Refer to Paragraph 4.",
            explanation: "Correct: It is explicitly defined as an event following neutron star mergers."
        },
        {
            passage: "Physical Science",
            text: "In paragraph 2, the author's rhetorical purpose is to:",
            options: [
                "Describe the life cycle of a typical human cell.",
                "Explain why massive stars eventually collapse.",
                "Argue that helium is more important than hydrogen.",
                "Compare the temperatures of different types of planets."
            ],
            answer: 1,
            hint: "Refer to Paragraph 2's focus on the iron core and gravity.",
            explanation: "Correct: The paragraph explains the internal mechanics leading to the end of a star's life."
        },
        {
            passage: "Physical Science",
            text: "Sentence Insertion: 'This inward collapse occurs in milliseconds, triggering a shockwave that ejects the star's outer layers into space.' Where would this best fit?",
            options: [
                "After the mention of outward radiation pressure and gravity.",
                "Before the mention of hydrogen fusion.",
                "After the discussion on neutron star mergers.",
                "At the very beginning of the passage."
            ],
            answer: 0,
            hint: "Context: Collapse of the core.",
            explanation: "Correct: This describes the immediate physical result of the radiation pressure failing against gravity."
        }
    ];

    let currentQuestionIndex = 0;
    let userAnswers = new Array(questions.length).fill(null);
    let isReviewMode = false;

    // DOM Elements
    const passageRef = document.getElementById('passage-ref');
    const questionText = document.getElementById('question-text');
    const optionsList = document.getElementById('options-list');
    const feedbackArea = document.getElementById('feedback-area');
    const explanationText = document.getElementById('explanation-text');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const hintBtn = document.getElementById('hint-btn');
    const progressText = document.getElementById('progress-text');
    const progressBar = document.getElementById('progress-bar');
    const quizContainer = document.getElementById('quiz-container');
    const resultsScreen = document.getElementById('results-screen');

    function initQuiz() {
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQuestionIndex];
        
        // Update Metadata
        progressText.innerText = `Question ${currentQuestionIndex + 1} of ${questions.length} [Topic: ${q.passage}]`;
        progressBar.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
        passageRef.innerText = "Hint will appear here when you click 'Show Hint'.";
        passageRef.classList.add('hidden');
        
        // Update Question
        questionText.innerText = q.text;
        optionsList.innerHTML = '';
        
        q.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = `w-full text-left p-4 rounded-lg border border-gray-300 transition hover:bg-gray-100 flex items-start`;
            
            const label = String.fromCharCode(65 + index); // A, B, C, D
            btn.innerHTML = `<span class="font-bold mr-3">${label}.</span> <span>${opt}</span>`;
            
            // Handle Selection
            if (userAnswers[currentQuestionIndex] === index) {
                btn.classList.add('selected', 'bg-blue-50');
            }

            if (isReviewMode) {
                if (index === q.answer) {
                    btn.classList.add('correct');
                } else if (userAnswers[currentQuestionIndex] === index) {
                    btn.classList.add('incorrect');
                }
                btn.disabled = true;
            } else {
                btn.onclick = () => selectOption(index);
            }
            
            optionsList.appendChild(btn);
        });

        // Show Feedback in Review Mode
        if (isReviewMode) {
            feedbackArea.classList.remove('hidden');
            explanationText.innerHTML = `<strong>Explanation:</strong> ${q.explanation}`;
            explanationText.className = userAnswers[currentQuestionIndex] === q.answer ? "text-green-700" : "text-red-700";
        } else {
            feedbackArea.classList.add('hidden');
        }

        // Nav Buttons
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.innerText = currentQuestionIndex === questions.length - 1 ? (isReviewMode ? "Finish Review" : "Finish Test") : "Next";
    }

    function selectOption(index) {
        userAnswers[currentQuestionIndex] = index;
        renderQuestion();
    }

    function nextQuestion() {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            renderQuestion();
        } else {
            if (isReviewMode) {
                location.reload(); // Simple restart
            } else {
                showResults();
            }
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            renderQuestion();
        }
    }

    function showHint() {
        passageRef.innerText = questions[currentQuestionIndex].hint;
        passageRef.classList.remove('hidden');
    }

    function showResults() {
        quizContainer.classList.add('hidden');
        resultsScreen.classList.remove('hidden');
        
        let score = 0;
        userAnswers.forEach((ans, i) => {
            if (ans === questions[i].answer) score++;
        });
        
        document.getElementById('final-score').innerText = score;
        
        // Breakdown
        const breakdown = document.getElementById('score-breakdown');
        breakdown.innerHTML = `
            <div class="space-y-2">
                <p><strong>Factual & Negative Factual:</strong> ${calculateSection(0, 9)}/10</p>
                <p><strong>Vocabulary & Rhetorical:</strong> ${calculateSection(10, 19)}/10</p>
                <p><strong>Inference & Insertion:</strong> ${calculateSection(20, 29)}/10</p>
            </div>
        `;
    }

    function calculateSection(start, end) {
        let s = 0;
        for(let i=start; i<=end; i++) {
            if(userAnswers[i] === questions[i].answer) s++;
        }
        return s;
    }

    function reviewMistakes() {
        isReviewMode = true;
        currentQuestionIndex = 0;
        resultsScreen.classList.add('hidden');
        quizContainer.classList.remove('hidden');
        renderQuestion();
    }

    // Event Listeners
    nextBtn.onclick = nextQuestion;
    prevBtn.onclick = prevQuestion;
    hintBtn.onclick = showHint;

    initQuiz();
</script>
</body>
</html>
